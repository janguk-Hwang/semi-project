<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/landing.css}">
    <title>user/reviewWrite.html</title>
    <style>
        /* ===== 리뷰 작성 페이지 ===== */
        .review-container {
            max-width: 900px;
            margin: 40px auto;
        }
        /* 상품 정보 */
        .product-info {
            display: flex;
            gap: 20px;
            padding: 20px;
            background: #fff;
            border-radius: 12px;
            margin-bottom: 30px;
        }
        .product-info img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .product-text {
            font-size: 14px;
            color: #333;
        }
        .product-text div {
            margin-bottom: 6px;
        }
        /* 리뷰 박스 */
        .review-box {
            background: #f5f5f5;
            border-radius: 14px;
            padding: 30px;
        }
        .review-title {
            text-align: center;
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
        }
        /* 별점 */
        .rating {
            text-align: center;
            margin-bottom: 20px;
        }
        .rating span {
            font-size: 32px;
            cursor: pointer;
            color: #ccc;
            transition: color 0.2s ease;
        }
        .rating span.active {
            color: #f5a623;
        }
        /* 후기 내용 */
        textarea {
            width: 100%;
            height: 180px;
            resize: none;
            padding: 14px;
            border-radius: 12px;
            border: 1px solid #ddd;
            font-size: 14px;
            box-sizing: border-box;
        }
        textarea:focus {
            outline: none;
            border-color: #aaa;
        }
        .char-count {
            text-align: right;
            font-size: 12px;
            color: #666;
            margin-top: 6px;
        }
        /* 업로드 박스 */
        .upload-box {
            margin-top: 20px;
            padding: 20px;
            border: 2px dashed #ccc;
            border-radius: 10px;
            text-align: center;
            background: #fafafa;
            font-size: 13px;
            color: #666;
        }

        .upload-box input[type="file"] {
            margin-bottom: 8px;
        }

        /* 버튼 영역 */
        .btn-area {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 30px;
        }

        .btn {
            padding: 10px 26px;
            border-radius: 6px;
            font-size: 14px;
            text-decoration: none;
            border: none;
            cursor: pointer;
        }

        .btn-cancel {
            background: #ddd;
            color: #333;
        }

        .btn-cancel:hover {
            background: #ccc;
        }

        .btn-submit {
            background: #333;
            color: #fff;
        }

        .btn-submit:hover {
            background: #111;
        }

    </style>
</head>
<body>
<!--header-->
<div th:replace="~{fragments/layout::header}"></div>

<!--content-->
<th:block th:replace="~{fragments/layout::getMain(~{::content})}">
    <div th:fragment="content"class="review-container">
        <!--상단메뉴-->
        <section class="mypage-menu">
            <a th:href="@{/mypage/orders}">주문/배송내역</a>
            <a th:href="@{/mypage/cart}">장바구니</a>
            <a href="">상품 후기</a>
            <a href="">게시글</a>
            <a href="">회원 정보 수정</a>
        </section>
        <!--상품정보-->
        <div class="product-info">
            <img src="" alt="상품이미지">
            <div class="product-text">
                <div><strong>상품명</strong></div>
                <div>옵션명</div>
                <div>수량 <span></span></div>
                <div>원</div>
            </div>
        </div>
        <!--리뷰작성-->
        <div class="review-box">
            <div class="review-title">리뷰쓰기</div>
            <form method="post" action="" enctype="multipart/form-data">
                <!--hidden값-->
                <input type="hidden" name="order_id">
                <input type="hidden" name="product_id" id="">
                <input type="hidden" name="option_id">
                <input type="hidden" name="rating">
                <!--별점-->
                <div class="rating">
                    <span data-value="1">★</span>
                    <span data-value="2">★</span>
                    <span data-value="3">★</span>
                    <span data-value="4">★</span>
                    <span data-value="5">★</span>
                </div>
                <input type="hidden" name="rating" id="ratingValue">
                <!--후기내용-->
                <textarea id="content" name="content" maxlength="2000" placeholder="후기 내용을 작성해주세요."></textarea>
                <div class="char-count">
                    <span id="charCount">0</span> /2000자
                </div>
                <!--사진업로드-->
                <div class="upload-box">
                    <input type="file" name="reviewImage" accept="image/*">
                    <div>JPG, PNG 파일만 업로드 가능 (최대 10MB)</div>
                </div>
                <!--버튼-->
                <div class="btn-area">
                    <a href="" class="btn btn-cancel">취소</a>
                    <button type="submit" class="btn btn-submit">등록</button>
                </div>
            </form>
        </div>
    </div>
</th:block>

<!--footer-->
<div th:replace="~{fragments/layout::footer}"></div>

<script>
    //글자수 카운트
    const textarea=document.getElementById("content");
    const charCount=document.getElementById("charCount");

    textarea.addEventListener('input',()=>{
        charCount.textContent=textarea.value.length;
    });

    //별점 처리
    const stars=document.querySelectorAll(".rating span");
    const ratingInput =document.getElementById("ratingValue");

    stars.forEach(star=>{
        star.addEventListener('click',()=>{
            const value=star.dataset.value;
            ratingInput.value=value;
            //색칠 로직
            stars.forEach(s=>{
                s.classList.toggle("active",s.dataset.value<=value);
            });
        });
    });
</script>
</body>
</html>